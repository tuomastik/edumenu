<phone:PhoneApplicationPage
    x:Class="Edumenu.MainPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:views="clr-namespace:Edumenu.Views"
    mc:Ignorable="d"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    shell:SystemTray.IsVisible="True">

    <Canvas x:Name="canvas"
            VerticalAlignment="Stretch"
            HorizontalAlignment="Stretch"
            ManipulationStarted="canvas_ManipulationStarted"
            ManipulationDelta="canvas_ManipulationDelta"
            ManipulationCompleted="canvas_ManipulationCompleted">
        
        <Canvas.Resources>
            <Storyboard x:Name="moveAnimation">
                <DoubleAnimation Duration="0:0:0.4"
                                 To="0"
                                 Storyboard.TargetProperty="(Canvas.Left)"
                                 Storyboard.TargetName="LayoutRoot"
                                 d:IsOptimized="True">
                    <DoubleAnimation.EasingFunction>
                        <ExponentialEase EasingMode="EaseOut"/>
                    </DoubleAnimation.EasingFunction>
                </DoubleAnimation>
            </Storyboard>
        </Canvas.Resources>

        <Canvas x:Name="LayoutRoot"
                CacheMode="BitmapCache"
                Width="1180"
                VerticalAlignment="Stretch"
                Background="Transparent"
                Canvas.Left="-350">
            
            <!--Left view-->
            <Border x:Name="LeftView"
                    Width="350"
                    CacheMode="BitmapCache"
                    Background="#FF31363E"
                    Grid.Column="0"
                    VerticalAlignment="Stretch"
                    HorizontalAlignment="Stretch"
                    Height="{Binding ActualHeight, ElementName=canvas}">
                <TextBlock Text="=D" />
            </Border>
            
            <!--Right view-->
            <Border x:Name="RightView"
                    Width="350"
                    CacheMode="BitmapCache"
                    Background="#FF31363E"
                    Margin="830,0,0,0"
                    Grid.Column="2"
                    VerticalAlignment="Stretch"
                    HorizontalAlignment="Stretch"
                    Height="{Binding ActualHeight, ElementName=canvas}">
                <TextBlock Text="=D" />
            </Border>

            <!--Middle/main View-->
            <Grid x:Name="MainView"
                  Margin="350,0,0,0"
                  CacheMode="BitmapCache"
                  Grid.Column="1"
                  Background="#FFCFD4E2"
                  Height="{Binding ActualHeight, ElementName=canvas}"
                  Width="480" >

                <!--Content-->
                <!--Content is defined before header, so that header will be on top of content-->
                <ScrollViewer x:Name="Scroller"
                              VerticalScrollBarVisibility="Visible"
                              Background="{StaticResource ResourceKey=ThemeColor1}"
                              Loaded="Scroller_Loaded">
                    <StackPanel>

                        <!--Empty space under the header-->
                        <StackPanel Width="58" Height="58" />

                        <Button Content="Alter observablecollection" Click="Button_Click"/>

                        <ItemsControl ItemsSource="{Binding restaurantsVisible}">
                            <ItemsControl.ItemTemplate>
                                <DataTemplate>
                                    <StackPanel>

                                        <!--Restaurant name-->
                                        <Button x:Name="RestaurantButton"
                                                Style="{StaticResource RestaurantButtonStyle}"
                                                Click="Button_Tapped">

                                            <TextBlock x:Name="RestaurantName_TB"
                                                       Text="{Binding name, Mode=OneWay}"
                                                       Foreground="{StaticResource ResourceKey=ThemeColor3}"
                                                       FontSize="26" Margin="20,5,0,5"
                                                       FontFamily="Segoe UI" FontWeight="SemiBold"/>
                                        </Button>

                                        <!--Restaurant menu-->
                                        <RichTextBox />
                                        <TextBlock Text="{Binding menu, Mode=OneWay}"
                                                   TextAlignment="Left"
                                                   Foreground="{StaticResource ResourceKey=ThemeColor3}"
                                                   TextWrapping="Wrap"
                                                   FontSize="22"
                                                   Margin="20,10" />

                                    </StackPanel>
                                </DataTemplate>
                            </ItemsControl.ItemTemplate>
                        </ItemsControl>
                    </StackPanel>
                </ScrollViewer>

                <!--Header-->
                <Grid Height="58"
                      VerticalAlignment="Top"
                      Grid.Row="0"
                      Background="{StaticResource ResourceKey=ThemeColor4}"
                      x:Name="HeaderContainer">

                    <!--Hamburger button-->
                    <Button HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            x:Name="LeftButtonTapped"
                            Click="OpenClose_Left"
                            Style="{StaticResource ContentButton}">
                        <StackPanel Margin="20">
                            <Rectangle Width="30" Height="2" Fill="{StaticResource ResourceKey=ThemeColor3}" />
                            <Rectangle Width="30" Height="2" Fill="{StaticResource ResourceKey=ThemeColor3}" Margin="0,5,0,0" />
                            <Rectangle Width="30" Height="2" Fill="{StaticResource ResourceKey=ThemeColor3}" Margin="0,5,0,0"/>
                        </StackPanel>
                    </Button>

                    <!--School name-->
                    <Button HorizontalAlignment="Center"
                                VerticalAlignment="Center"
                                Style="{StaticResource ContentButton}"
                                Click="OpenClose_Right">
                        <TextBlock Text="{Binding selectedSchool}"
                                   x:Name="SelectedSchool"
                                   Foreground="{StaticResource ResourceKey=ThemeColor3}"
                                   FontSize="24"
                                   Padding="25,10,25,10"/>
                    </Button>

                    <!--<ProgressBar x:Name="ProBar"
                                     IsIndeterminate="True"
                                     Foreground="White"
                                     Margin="0,52,0,0"/>-->

                </Grid>







            </Grid>
        </Canvas>
    </Canvas>

</phone:PhoneApplicationPage>